Feature: Cart # features/cart.feature:1

  Background:   # features/cart.feature:3

  Scenario Outline: Add products and remove some -- @1.1   # features/cart.feature:17
    Given user is logged in as "standard_user"             # features/steps/products_steps.py:17
    When adding 3 products to the cart                     # features/steps/cart_steps.py:9
    Then cart badge should show 3 items                    # features/steps/cart_steps.py:15
    When opening the cart                                  # features/steps/cart_steps.py:20
    And removing the product at position 1 from the cart   # features/steps/cart_steps.py:26
    Then cart should have 2 items                          # features/steps/cart_steps.py:36
      Traceback (most recent call last):
        File "C:\Users\mariel\AppData\Local\Programs\Python\Python314\Lib\site-packages\behave\model.py", line 1329, in run
          match.run(runner.context)
          ~~~~~~~~~^^^^^^^^^^^^^^^^
        File "C:\Users\mariel\AppData\Local\Programs\Python\Python314\Lib\site-packages\behave\matchers.py", line 98, in run
          self.func(context, *args, **kwargs)
          ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "features\steps\cart_steps.py", line 38, in verify_cart_count
          WebDriverWait(context.driver, 5).until(
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
              lambda d: context.cart_page.get_cart_items_count() == count
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
          )
          ^
        File "C:\Users\mariel\AppData\Local\Programs\Python\Python314\Lib\site-packages\selenium\webdriver\support\wait.py", line 105, in until
          raise TimeoutException(message, screen, stacktrace)
      selenium.common.exceptions.TimeoutException: Message: 
      
      
      Captured stdout:
      
      URL at failure: https://www.saucedemo.com/inventory.html
      Title at failure: Swag Labs
      
      Screenshot saved: C:\Users\marie\OneDrive\Desktop\Home Assignment - Perion\screenshots\Add_products_and_remove_some_--_@1.1__20260131_195533.png
      
      Captured logging:
      INFO:root:get_cart_product_ids: ['sauce-labs-backpack', 'sauce-labs-bike-light', 'sauce-labs-bolt-t-shirt']

    And the removed product should not be in the cart      # None
    And the cart should contain only the other products    # None

Feature: Checkout # features/checkout.feature:1

  Background:   # features/checkout.feature:3

  Scenario Outline: Complete checkout with CSV data -- @1.1   # features/checkout.feature:17
    Given user is logged in as "standard_user"                # features/steps/products_steps.py:17
    Given there are 3 products in the cart                    # features/steps/checkout_steps.py:26
    When proceeding to checkout                               # features/steps/checkout_steps.py:34
    And entering checkout information from CSV row "1"        # features/steps/checkout_steps.py:40
    And reviewing the order summary                           # features/steps/checkout_steps.py:49
      Traceback (most recent call last):
        File "C:\Users\mariel\AppData\Local\Programs\Python\Python314\Lib\site-packages\behave\model.py", line 1329, in run
          match.run(runner.context)
          ~~~~~~~~~^^^^^^^^^^^^^^^^
        File "C:\Users\mariel\AppData\Local\Programs\Python\Python314\Lib\site-packages\behave\matchers.py", line 98, in run
          self.func(context, *args, **kwargs)
          ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "features\steps\checkout_steps.py", line 51, in review_order_summary
          item_prices = context.checkout_page.get_overview_item_prices()
        File "C:\Users\marie\OneDrive\Desktop\Home Assignment - Perion\pages\checkout_page.py", line 46, in get_overview_item_prices
          elements: List[WebElement] = self.wait_for_all_visible(self.OVERVIEW_ITEM_PRICES)
                                       ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "C:\Users\marie\OneDrive\Desktop\Home Assignment - Perion\pages\base_page.py", line 22, in wait_for_all_visible
          return self.wait.until(EC.visibility_of_all_elements_located(locator))
                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "C:\Users\mariel\AppData\Local\Programs\Python\Python314\Lib\site-packages\selenium\webdriver\support\wait.py", line 105, in until
          raise TimeoutException(message, screen, stacktrace)
      selenium.common.exceptions.TimeoutException: Message: 
      
      
      Captured stdout:
      
      URL at failure: https://www.saucedemo.com/checkout-step-one.html
      Title at failure: Swag Labs
      
      Screenshot saved: C:\Users\marie\OneDrive\Desktop\Home Assignment - Perion\screenshots\Complete_checkout_with_CSV_data_--_@1.1__20260131_195548.png

    Then item total should equal the sum of items plus tax    # None
    When completing the order                                 # None
    Then order success message should be displayed            # None

  Scenario: Checkout with empty cart                  # features/checkout.feature:19
    Given user is logged in as "standard_user"        # features/steps/products_steps.py:17
    Given having an empty cart                        # features/steps/checkout_steps.py:76
    When attempting to checkout                       # features/steps/checkout_steps.py:83
    Then checkout should be blocked for an empty cart # features/steps/checkout_steps.py:88
      Traceback (most recent call last):
        File "C:\Users\mariel\AppData\Local\Programs\Python\Python314\Lib\site-packages\behave\model.py", line 1329, in run
          match.run(runner.context)
          ~~~~~~~~~^^^^^^^^^^^^^^^^
        File "C:\Users\mariel\AppData\Local\Programs\Python\Python314\Lib\site-packages\behave\matchers.py", line 98, in run
          self.func(context, *args, **kwargs)
          ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "features\steps\checkout_steps.py", line 91, in verify_checkout_is_blocked
          wait.until(EC.url_contains("cart.html"))
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "C:\Users\mariel\AppData\Local\Programs\Python\Python314\Lib\site-packages\selenium\webdriver\support\wait.py", line 105, in until
          raise TimeoutException(message, screen, stacktrace)
      selenium.common.exceptions.TimeoutException: Message: 
      
      
      Captured stdout:
      
      URL at failure: https://www.saucedemo.com/checkout-step-one.html
      Title at failure: Swag Labs
      
      Screenshot saved: C:\Users\marie\OneDrive\Desktop\Home Assignment - Perion\screenshots\Checkout_with_empty_cart_20260131_195557.png


Feature: Login # features/login.feature:1

  Scenario Outline: Login with valid and invalid users -- @1.1   # features/login.feature:10
    Given login page is displayed                                # features/steps/login_steps.py:16
    When login is performed using "standard_user"                # features/steps/login_steps.py:23
    Then login should succeed                                    # features/steps/login_steps.py:33

  Scenario Outline: Login with valid and invalid users -- @1.2                              # features/login.feature:11
    Given login page is displayed                                                           # features/steps/login_steps.py:16
    When login is performed using "locked_out_user"                                         # features/steps/login_steps.py:23
    Then login should fail with error "Epic sadface: Sorry, this user has been locked out." # features/steps/login_steps.py:38

  Scenario Outline: Login with valid and invalid users -- @1.3                                                    # features/login.feature:12
    Given login page is displayed                                                                                 # features/steps/login_steps.py:16
    When login is performed using "invalid_user"                                                                  # features/steps/login_steps.py:23
    Then login should fail with error "Epic sadface: Username and password do not match any user in this service" # features/steps/login_steps.py:38

Feature: Products # features/products.feature:1

  Background:   # features/products.feature:3

  Scenario: Product listing is displayed with valid data  # features/products.feature:6
    Given user is logged in as "standard_user"            # features/steps/products_steps.py:17
    Then product listing should be visible                # features/steps/products_steps.py:28
    And all product names should be non-empty             # features/steps/products_steps.py:33
    And all product prices should be greater than 0       # features/steps/products_steps.py:41

  Scenario Outline: Sort by price -- @1.1          # features/products.feature:17
    Given user is logged in as "standard_user"     # features/steps/products_steps.py:17
    When sorting products by "Price (low to high)" # features/steps/products_steps.py:49
    Then product prices should be sorted ascending # features/steps/products_steps.py:54

  Scenario Outline: Sort by price -- @1.2           # features/products.feature:18
    Given user is logged in as "standard_user"      # features/steps/products_steps.py:17
    When sorting products by "Price (high to low)"  # features/steps/products_steps.py:49
    Then product prices should be sorted descending # features/steps/products_steps.py:54

